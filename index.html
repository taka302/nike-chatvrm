<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Nike ChatVRM Enhanced - å®Œå…¨ç‰ˆ</title>
    <link rel="stylesheet" href="style.css">

    <!-- ğŸ“Š Mermaid.js - ãƒ•ãƒ­ãƒ¼ãƒãƒ£ãƒ¼ãƒˆã€å›³è¡¨ -->
    <script src="https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.min.js"></script>

    <!-- ğŸ“ˆ Chart.js - ã‚°ãƒ©ãƒ• -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

    <!-- ğŸ”¢ MathJax - æ•°å¼ -->
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>

    <!-- âœ¨ Marked.js - Markdownè§£æ -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>

    <!-- ğŸ® Three.js - 3Dè¡¨ç¤º -->
    <script src="https://cdn.jsdelivr.net/npm/three@0.155.0/build/three.min.js"></script>

    <!-- ğŸ§ VRM Loader - VRoidãƒ¢ãƒ‡ãƒ«èª­ã¿è¾¼ã¿ï¼ˆãƒ­ãƒ¼ãƒ€ãƒ¼ã‚’windowã¸å…¬é–‹ï¼‰ -->
    <script>
        window.addEventListener('load', async () => {
            try {
                const { GLTFLoader } = await import('https://cdn.jsdelivr.net/npm/three@0.155.0/examples/jsm/loaders/GLTFLoader.js');
                const { VRMLoaderPlugin } = await import('https://cdn.jsdelivr.net/npm/@pixiv/three-vrm@2.0.6/lib/three-vrm.module.js');

                window.GLTFLoader = GLTFLoader;
                window.VRMLoaderPlugin = VRMLoaderPlugin;

                window.dispatchEvent(new Event('vrm-loaders-ready'));
                console.log('âœ… VRMãƒ­ãƒ¼ãƒ€ãƒ¼èª­ã¿è¾¼ã¿å®Œäº†');
            } catch (error) {
                console.error('VRMãƒ­ãƒ¼ãƒ€ãƒ¼èª­ã¿è¾¼ã¿ã«å¤±æ•—ã—ã¾ã—ãŸ', error);
            }
        });
    </script>
</head>
<body>
    <div class="container">
        <!-- =======================
             å·¦ 25% : VRMã‚­ãƒ£ãƒ³ãƒã‚¹
        ======================== -->
        <aside class="vrm-pane">
            <canvas id="vrm-canvas"></canvas>
        </aside>

        <!-- =======================
             ä¸­å¤® 50% : å—ä¿¡ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚¨ãƒªã‚¢
        ======================== -->
        <main class="chat-pane">
            <header class="chat-header">
                <h1>ã“ã‚“ã«ã¡ã¯ï¼ç§ã¯ãƒ‹ã‚±ã¡ã‚ƒã‚“ã§ã™ï¼</h1>
                <p>è³ªå•ã«å›³ã‚„ã‚¤ãƒ©ã‚¹ãƒˆã€ã‚°ãƒ©ãƒ•ä»˜ãã§ç­”ãˆã¾ã™ï¼ğŸ“šğŸ“ŠğŸ–¼ï¸ğŸ¨</p>
            </header>

            <section id="chat-messages" class="chat-messages">
                <!-- JSã‹ã‚‰ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãŒè¿½åŠ ã•ã‚Œã‚‹ -->
            </section>
        </main>

        <!-- =======================
             å³ 25% : å…¥åŠ› & è¨­å®šã‚¨ãƒªã‚¢
        ======================== -->
        <aside class="control-pane">
            <div class="character-card">
                <h2>ãƒ‹ã‚±ã¡ã‚ƒã‚“</h2>

                <div class="form-group">
                    <label for="character-select">ğŸ­ ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼é¸æŠ</label>
                    <select id="character-select">
                        <option value="nike">ãƒ‹ã‚±ã¡ã‚ƒã‚“</option>
                        <!-- ä»–ã‚­ãƒ£ãƒ©ã¯ script.js ã® characters ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã¨åŒæœŸ -->
                    </select>
                </div>

                <div class="form-group">
                    <label for="voicevox-character">ğŸ”Š VOICEVOXã‚­ãƒ£ãƒ©</label>
                    <select id="voicevox-character">
                        <option value="3">ãšã‚“ã ã‚‚ã‚“</option>
                        <option value="2">å››å›½ã‚ãŸã‚“</option>
                        <option value="8">æ˜¥æ—¥éƒ¨ã¤ã‚€ã</option>
                        <option value="67">ãƒŠãƒ¼ã‚¹ãƒ­ãƒœ_ã‚¿ã‚¤ãƒ—T</option>
                        <!-- å¿…è¦ã«å¿œã˜ã¦ã“ã“ã«è¿½åŠ  -->
                    </select>
                </div>

                <div class="form-group">
                    <label for="nikke-personality">ğŸ’¡ NIKKEã‚­ãƒ£ãƒ©è¨­å®šï¼ˆæ€§æ ¼ï¼‰</label>
                    <select id="nikke-personality">
                        <option value="genki">å…ƒæ°—ãƒ»æ˜ã‚‹ã„</option>
                        <option value="cool">ã‚¯ãƒ¼ãƒ«</option>
                        <option value="oneesan">ãŠå§‰ã•ã‚“</option>
                    </select>
                </div>

                <div class="form-group">
                    <label for="nikke-color">ğŸ¨ ãƒ†ãƒ¼ãƒã‚«ãƒ©ãƒ¼</label>
                    <input type="color" id="nikke-color" value="#ff66cc">
                </div>

                <div class="form-group">
                    <label for="vrm-file-input">ğŸ“‚ VRMãƒ•ã‚¡ã‚¤ãƒ«ã‚’èª­ã¿è¾¼ã‚€</label>
                    <input type="file" id="vrm-file-input" accept=".vrm">
                </div>
            </div>

            <div class="input-card">
                <div id="image-preview-area" class="image-preview-area">
                    <!-- ç”»åƒãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ï¼ˆPexelså‰Šé™¤ãƒ»ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã®ã¿ï¼‰ -->
                </div>

                <textarea
                    id="user-input"
                    class="message-input"
                    placeholder="ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„â€¦ï¼ˆç”»åƒã‚’è¿½åŠ ã™ã‚‹å ´åˆã¯ä¸‹ã®ãƒœã‚¿ãƒ³ã‹ã‚‰ï¼‰"
                ></textarea>

                <div class="button-row">
                    <button id="send-button" class="btn primary">é€ä¿¡</button>
                    <button id="image-upload-button" class="btn">ç”»åƒè¿½åŠ </button>
                    <button id="voice-input-button" class="btn">éŸ³å£°å…¥åŠ›</button>
                </div>

                <div class="button-row">
                    <button id="settings-button" class="btn secondary">âš™ï¸ è¨­å®š</button>
                </div>
            </div>
        </aside>
    </div>

    <input type="file" id="hidden-image-input" accept="image/*" multiple style="display:none">

    <script src="script.js"></script>
</body>
</html>
